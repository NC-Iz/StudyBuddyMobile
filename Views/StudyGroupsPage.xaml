<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="StudyBuddyMobile.Views.StudyGroupsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Study Groups"
             BackgroundColor="#f8fafc">

    <Grid RowDefinitions="Auto,*">

        <!-- Header Section -->
        <Frame Grid.Row="0"
               BackgroundColor="#10b981"
               CornerRadius="20"
               Padding="20"
               Margin="0,0,0,15"
               HasShadow="True">
            <VerticalStackLayout Spacing="15">

                <!-- Title -->
                <Label Text="ðŸ‘¥ Study Groups"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" />

                <Label Text="Join or create study groups to collaborate with other learners"
                       FontSize="14"
                       TextColor="White"
                       Opacity="0.9"
                       HorizontalOptions="Center" />

                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Grid.Column="0"
                            x:Name="CreateGroupButton"
                            Text="+ Create Group"
                            FontSize="14"
                            FontAttributes="Bold"
                            BackgroundColor="White"
                            TextColor="#10b981"
                            CornerRadius="8"
                            HeightRequest="40"
                            Clicked="OnCreateGroupClicked" />

                    <Button Grid.Column="1"
                            x:Name="MyGroupsButton"
                            Text="ðŸ“‹ My Groups"
                            FontSize="14"
                            FontAttributes="Bold"
                            BackgroundColor="#059669"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="40"
                            Clicked="OnMyGroupsClicked" />
                </Grid>

                <!-- Statistics Cards -->
                <Grid ColumnDefinitions="*,*,*" 
                      ColumnSpacing="10"
                      Margin="0,10,0,0">

                    <Frame Grid.Column="0"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="TotalGroupsLabel"
                                   Text="0"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#10b981" />
                            <Label Text="Public"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="1"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="MyGroupsCountLabel"
                                   Text="0"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#4f46e5" />
                            <Label Text="Joined"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="2"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="CreatedGroupsLabel"
                                   Text="0"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#f59e0b" />
                            <Label Text="Created"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>
                </Grid>

            </VerticalStackLayout>
        </Frame>

        <!-- Groups List -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20,0" Spacing="15">

                <!-- Search Bar -->
                <SearchBar x:Name="SearchBar"
                          Placeholder="Search groups by subject..."
                          BackgroundColor="White"
                          TextChanged="OnSearchTextChanged" />

                <!-- Groups Collection -->
                <StackLayout x:Name="GroupsContainer">

                    <!-- Empty State -->
                    <Frame x:Name="EmptyStateFrame"
                           BackgroundColor="White"
                           CornerRadius="12"
                           Padding="40"
                           IsVisible="True"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="ðŸ‘¥"
                                   FontSize="48"
                                   HorizontalOptions="Center" />
                            <Label Text="No study groups found!"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#1f2937" />
                            <Label Text="Be the first to create a study group and start building your learning community."
                                   FontSize="14"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                            <Button Text="+ Create First Group"
                                    FontSize="16"
                                    FontAttributes="Bold"
                                    BackgroundColor="#10b981"
                                    TextColor="White"
                                    CornerRadius="8"
                                    HeightRequest="45"
                                    Clicked="OnCreateGroupClicked" />
                        </VerticalStackLayout>
                    </Frame>

                </StackLayout>

                <!-- Loading Indicator -->
                <ActivityIndicator x:Name="LoadingIndicator"
                                 IsVisible="False"
                                 IsRunning="False"
                                 Color="#10b981"
                                 VerticalOptions="Center" />

            </VerticalStackLayout>
        </ScrollView>

    </Grid>

</ContentPage>