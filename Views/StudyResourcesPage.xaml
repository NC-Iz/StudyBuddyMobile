<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="StudyBuddyMobile.Views.StudyResourcesPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="My Study Resources"
             BackgroundColor="#f8fafc">

    <Grid RowDefinitions="Auto,*">

        <!-- Header Section -->
        <Frame Grid.Row="0"
               BackgroundColor="#4f46e5"
               CornerRadius="20"
               Padding="20"
               Margin="0,0,0,15"
               HasShadow="True">
            <VerticalStackLayout Spacing="15">

                <!-- Title -->
                <Label Text="ðŸ“š My Study Resources"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" />

                <Label Text="Manage and organize your learning materials"
                       FontSize="14"
                       TextColor="White"
                       Opacity="0.9"
                       HorizontalOptions="Center" />

                <!-- Add Resource Button -->
                <Button x:Name="AddResourceButton"
                        Text="+ Add New Resource"
                        FontSize="16"
                        FontAttributes="Bold"
                        BackgroundColor="White"
                        TextColor="#4f46e5"
                        CornerRadius="8"
                        HeightRequest="45"
                        Clicked="OnAddResourceClicked" />

                <!-- Statistics Cards -->
                <Grid ColumnDefinitions="*,*,*,*" 
                      ColumnSpacing="10"
                      Margin="0,10,0,0">

                    <Frame Grid.Column="0"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="TotalResourcesLabel"
                                   Text="0"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#4f46e5" />
                            <Label Text="Total"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="1"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="PdfCountLabel"
                                   Text="0"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#ef4444" />
                            <Label Text="PDFs"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="2"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="VideoCountLabel"
                                   Text="0"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#8b5cf6" />
                            <Label Text="Videos"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="3"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="SubjectsCountLabel"
                                   Text="0"
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#10b981" />
                            <Label Text="Subjects"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>
                </Grid>

            </VerticalStackLayout>
        </Frame>

        <!-- Resources List -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20,0" Spacing="15">

                <!-- Search Bar -->
                <SearchBar x:Name="SearchBar"
                          Placeholder="Search by subject..."
                          BackgroundColor="White"
                          TextChanged="OnSearchTextChanged" />

                <!-- Resources Collection -->
                <StackLayout x:Name="ResourcesContainer">

                    <!-- Empty State -->
                    <Frame x:Name="EmptyStateFrame"
                           BackgroundColor="White"
                           CornerRadius="12"
                           Padding="40"
                           IsVisible="True"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="ðŸ“š"
                                   FontSize="48"
                                   HorizontalOptions="Center" />
                            <Label Text="No study resources yet!"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#1f2937" />
                            <Label Text="Upload your first resource to start building your knowledge base."
                                   FontSize="14"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                            <Button Text="+ Add Your First Resource"
                                    FontSize="16"
                                    FontAttributes="Bold"
                                    BackgroundColor="#4f46e5"
                                    TextColor="White"
                                    CornerRadius="8"
                                    HeightRequest="45"
                                    Clicked="OnAddResourceClicked" />
                        </VerticalStackLayout>
                    </Frame>

                </StackLayout>

                <!-- Loading Indicator -->
                <ActivityIndicator x:Name="LoadingIndicator"
                                 IsVisible="False"
                                 IsRunning="False"
                                 Color="#4f46e5"
                                 VerticalOptions="Center" />

            </VerticalStackLayout>
        </ScrollView>

    </Grid>

</ContentPage>