<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="StudyBuddyMobile.Views.MyGroupsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="My Study Groups"
             BackgroundColor="#f8fafc">

    <Grid RowDefinitions="Auto,*">

        <!-- Header Section -->
        <Frame Grid.Row="0"
               BackgroundColor="#4f46e5"
               CornerRadius="20"
               Padding="20"
               Margin="0,0,0,15"
               HasShadow="True">
            <VerticalStackLayout Spacing="15">

                <!-- Title -->
                <Label Text="ðŸ“‹ My Study Groups"
                       FontSize="24"
                       FontAttributes="Bold"
                       TextColor="White"
                       HorizontalOptions="Center" />

                <Label Text="Groups you've created or joined"
                       FontSize="14"
                       TextColor="White"
                       Opacity="0.9"
                       HorizontalOptions="Center" />

                <!-- Action Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                    <Button Grid.Column="0"
                            x:Name="CreateGroupButton"
                            Text="+ Create New"
                            FontSize="14"
                            FontAttributes="Bold"
                            BackgroundColor="White"
                            TextColor="#4f46e5"
                            CornerRadius="8"
                            HeightRequest="40"
                            Clicked="OnCreateGroupClicked" />

                    <Button Grid.Column="1"
                            x:Name="BrowseGroupsButton"
                            Text="ðŸ” Browse All"
                            FontSize="14"
                            FontAttributes="Bold"
                            BackgroundColor="#3730a3"
                            TextColor="White"
                            CornerRadius="8"
                            HeightRequest="40"
                            Clicked="OnBrowseGroupsClicked" />
                </Grid>

                <!-- Statistics Cards -->
                <Grid ColumnDefinitions="*,*,*" 
                      ColumnSpacing="10"
                      Margin="0,10,0,0">

                    <Frame Grid.Column="0"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="TotalMyGroupsLabel"
                                   Text="0"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#4f46e5" />
                            <Label Text="Total"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="1"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="CreatedGroupsLabel"
                                   Text="0"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#f59e0b" />
                            <Label Text="Created"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>

                    <Frame Grid.Column="2"
                           BackgroundColor="White"
                           CornerRadius="8"
                           Padding="10"
                           Opacity="0.95">
                        <VerticalStackLayout Spacing="2">
                            <Label x:Name="JoinedGroupsLabel"
                                   Text="0"
                                   FontSize="16"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#10b981" />
                            <Label Text="Joined"
                                   FontSize="10"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                        </VerticalStackLayout>
                    </Frame>
                </Grid>

            </VerticalStackLayout>
        </Frame>

        <!-- Groups List -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Padding="20,0" Spacing="15">

                <!-- Filter Buttons -->
                <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                    <Button Grid.Column="0"
            x:Name="AllGroupsFilter"
            Text="All"
            FontSize="14"
            FontAttributes="Bold"
            BackgroundColor="#4f46e5"
            TextColor="White"
            CornerRadius="15"
            HeightRequest="40"
            Clicked="OnFilterClicked" />

                    <Button Grid.Column="1"
            x:Name="CreatedFilter"
            Text="Created"
            FontSize="14"
            FontAttributes="Bold"
            BackgroundColor="#f3f4f6"
            TextColor="#374151"
            CornerRadius="15"
            HeightRequest="40"
            Clicked="OnFilterClicked" />

                    <Button Grid.Column="2"
            x:Name="JoinedFilter"
            Text="Joined"
            FontSize="14"
            FontAttributes="Bold"
            BackgroundColor="#f3f4f6"
            TextColor="#374151"
            CornerRadius="15"
            HeightRequest="40"
            Clicked="OnFilterClicked" />
                </Grid>

                <!-- Groups Collection -->
                <StackLayout x:Name="GroupsContainer">

                    <!-- Empty State -->
                    <Frame x:Name="EmptyStateFrame"
                           BackgroundColor="White"
                           CornerRadius="12"
                           Padding="40"
                           IsVisible="True"
                           HasShadow="True">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="ðŸ“­"
                                   FontSize="48"
                                   HorizontalOptions="Center" />
                            <Label Text="No groups found!"
                                   FontSize="20"
                                   FontAttributes="Bold"
                                   HorizontalOptions="Center"
                                   TextColor="#1f2937" />
                            <Label x:Name="EmptyStateMessage"
                                   Text="You haven't joined any study groups yet. Browse public groups or create your own!"
                                   FontSize="14"
                                   HorizontalOptions="Center"
                                   TextColor="#6b7280" />
                            <StackLayout Orientation="Horizontal" 
                                        HorizontalOptions="Center"
                                        Spacing="10">
                                <Button Text="ðŸ” Browse Groups"
                                        FontSize="14"
                                        FontAttributes="Bold"
                                        BackgroundColor="#10b981"
                                        TextColor="White"
                                        CornerRadius="8"
                                        HeightRequest="40"
                                        Clicked="OnBrowseGroupsClicked" />
                                <Button Text="+ Create Group"
                                        FontSize="14"
                                        FontAttributes="Bold"
                                        BackgroundColor="#4f46e5"
                                        TextColor="White"
                                        CornerRadius="8"
                                        HeightRequest="40"
                                        Clicked="OnCreateGroupClicked" />
                            </StackLayout>
                        </VerticalStackLayout>
                    </Frame>

                </StackLayout>

                <!-- Loading Indicator -->
                <ActivityIndicator x:Name="LoadingIndicator"
                                 IsVisible="False"
                                 IsRunning="False"
                                 Color="#4f46e5"
                                 VerticalOptions="Center" />

            </VerticalStackLayout>
        </ScrollView>

    </Grid>

</ContentPage>